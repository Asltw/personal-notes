#### vim的使用
> 参考鸟哥Linux私房菜整理笔记，加深记忆

vim分为三种模式：一般模式、编辑模式、命令行模式
- 一般模式

  以vim打开一个文件直接进入，这个模式被称为一般模式，你可以用上下左右来移动光标，可以删除字符或者整行或者多行，也可以复制，粘贴等等

- 编辑模式

  在一般模式中，必须等到你按下“i, I, o, O, a, A, r, R”等任意一个字符之后才会进入编辑模式。也许你会认为一般模式中的删除，复制也算编辑啊，其实这不是，必须是在一般模式中按下以上字母进入才算编辑模式，我认为在一般模式中的操作可以理解为vim中的快捷键。如果要从编辑模式切换到一般模式，需按键盘左上角的【esc】键

- 命令行模式

    在一般模式当中，输入“:、/、?”三个中的任意个字符(不包含"、")，在这个模式中可以供你查找，读取，保存，替换等等。如果要从编辑模式切换到一般模式，需按键盘左上角的【esc】键。

    发现：当执行完一个命令之后即退出到一般模式中，虽然界面可能还是在命令行界面。但是你可以执行在一般模式中的操作，如：删除，复制等等。

> 注意：一般模式可以和编辑模式、命令行模式互相切换，但是编辑模式和命令行模式不能互相切换

#### 一般模式中的按键说明

- h或向左的箭头键：光标向左移动一个字符
- j或向下的箭头键：光标向下移动一个字符
- k或向上的箭头键：光标向上移动一个字符
- l或向右的箭头键：光标向右移动一个字符
> 向下移动30行，可以使用“30j”或者“30↓”，向右移动10个字符，可以使用“10l”或者”10→“，其他同理
- ctrl + f：屏幕向下移动一页，相当于【Page Down】
- ctrl + b：屏幕向下移动一页，相当于【Page Up】
- ctrl + d：屏幕向下移动半页
- ctrl + u：屏幕向上移动半页
- n<空格>：n表示数字，如20.按下一个数字后，按下空格(space)，光标会在这行向右移动n(20)个字符。
- 0或功能键[Home]：移动到这行的最前面
- $或[End]：移动到这行末尾
- G：移动到这个文件的最后一行
- nG：n为数字。移动到该文件的第n行
- gg：移动到这个文件的第一行，相当于1G
- n[Enter]：n为数字，光标向下移动n行
- x,X：x向后删除一个字符，X向前删除一个字符
- nx：n为数字，连续向后删除n个字符
- nX：n为数字，连续向前删除n个字符
- dd：删除光标所在行
- ndd：n为数字，删除光标所在行向下n行
- yy：复制光标所在行
- nyy：n为数字，复制光标所在行向下n行
- p,P：p将已复制的数据在光标下一行黏贴，P将已复制的数据在光标上一行黏贴

#### 命令行模式按键说明
- /word 向下寻找一个名为word的字符串。按n键继续向下寻找
- ?word 向上寻找一个名为word的字符串。按n键继续向上寻找
- :n1,n2s/word1/word2/g n1与n2为数字，在第n1行和n2行之间查找word1，并将word1替换为word2(不包含第n2行，n1<=替换<n2)。举例说明，要将100到200行之间的vbird替换成VBIRD则用":100,200/vbird/VBIRD/g"
- :1,$s/word1/word2/g 从第一行到最后一行查找word2字符串，并将该字符串替换成word2，我一般喜欢用":%s/word1/word2/g"
- :1,$s/word1/word2/gc 从第一行到最后一行查找word2字符串，并将该字符串替换成word2，在替换之前需要确认。
- :w 将编辑的数据写入硬盘文件中
- :q 离开
- :q! 若修改过文件，又不想存储，使用":q!"为强制离开并不保存
- :wq 保存并离开
- :set nu 显示行号
- :set nonu 取消行号显示

#### 块选择
1. 使用vim hosts打开该文件
2. 将光标移动到第一行的host那个h头上，然后按下ctrl + v，左下角会出现块示意图，如下图所示：
![image](http://pceh5403k.bkt.clouddn.com/Linux%E5%9D%97%E9%80%89%E6%8B%A9%E7%A4%BA%E6%84%8F%E5%9B%BE1.jpg)
3. 将光标移动到底部(第29行)，此时光标移动过的区域会反白，如下图所示：
![image](http://pceh5403k.bkt.clouddn.com/Linux%E5%9D%97%E9%80%89%E6%8B%A9%E7%A4%BA%E6%84%8F%E5%9B%BE2.jpg)
4. 此时你可以按下"y"来进行复制，当你按下y之后，反白的块就会消失
5. 最后将光标移动到第一行的最右边，并且再用编辑模式向右移动两个空格，回到一般模式之后，再按下"p"后，即复制了块选择，如图所示：
![image](http://pceh5403k.bkt.clouddn.com/Linux%E5%BF%AB%E9%80%89%E6%8B%A9%E7%A4%BA%E6%84%8F%E5%9B%BE3.jpg)

#### 多文件编辑
如果想要将A文件中的内容复制到B文件，通常需要用vim打开两个窗口来复制，偏偏每个vim都是独立的，因此并没有办法在A文件中执行"nyy"，然后再在B文件中执行"p"，当然直接通过鼠标操作也是可以的，下面介绍一个直接通过命令操作的

1. 通过"vim A B"命令使用一个vim打开两个文件
2. 在vim中先使用":files"查看一下编辑的文件数据有什么，结果如下图所示。图中最后一行显示的是“Enter或其他命令继续”，按下Enter回到vim一般模式。
![image](http://pceh5403k.bkt.clouddn.com/Linux%E5%A4%9A%E6%96%87%E4%BB%B6%E7%BC%96%E8%BE%911.jpg)
3. 在第一行输入"4yy"复制4行
4. 在命令行模式下输入":n"会来到第二个编辑的文件B
5. 在B文件下按下"G"到最后一行，再输入"p"黏贴
6. 在命令行模式下输入":wq"保存并退出

> 命令行模式下输入":N"选择上一个文件，":n"选择下一个文件

#### vim键盘图

![image](http://pceh5403k.bkt.clouddn.com/vim%E9%94%AE%E7%9B%98%E5%9B%BE.png)
